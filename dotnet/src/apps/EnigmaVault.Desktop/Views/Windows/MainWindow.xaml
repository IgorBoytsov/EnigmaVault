<Window x:Class="EnigmaVault.Desktop.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EnigmaVault.Desktop.Views.Windows" 
        xmlns:enums="clr-namespace:EnigmaVault.Desktop.Enums" 
        xmlns:windows="clr-namespace:EnigmaVault.Desktop.ViewModels.Windows" 
        d:DataContext="{d:DesignInstance Type=windows:MainWindowViewModel}"
        mc:Ignorable="d"
        WindowStyle="ThreeDBorderWindow"
        WindowStartupLocation="CenterScreen"
        Title="MainWindow" Height="450" Width="800">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32"
                      GlassFrameThickness="0"
                      CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Border x:Name="MainWindowBorder" Background="{StaticResource App.Background}" BorderBrush="LightCoral" BorderThickness="0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height ="32"/>
                <RowDefinition Height ="*"/>
            </Grid.RowDefinitions>

            <!--#region Кнопки измение WindowStat -->

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="1">

                <Button x:Name="BtnMinimize"
                        Command="{Binding MinimizeWindowCommand}" 
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Свернуть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=BtnMinimize}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Minimize}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="RestoreButton" 
                        Visibility="Collapsed" 
                        Command="{Binding RestoreWindowCommand}" 
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Во весь экран" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=RestoreButton}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Restore}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="MaximizeButton" 
                        Visibility="Visible"  
                        Command="{Binding MaximizeWindowCommand}"
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Развернуть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=MaximizeButton}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Maximize}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="BtnClose" Command="{Binding ShutDownAppCommand}"
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Закрыть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=BtnClose}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Close}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

            </StackPanel>

            <!--#endregion-->

            <!--#region Content -->

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="45"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!--#region Боковое меню -->
                
                <DockPanel>

                    <Button Command="{Binding OpenPageCommand}"
                            CommandParameter="{x:Static enums:PagesName.Password}"
                            Style="{StaticResource Button.MainWindow.SideMenu}"
                            DockPanel.Dock="Top">
                        <Button.ToolTip>
                            <ToolTip Content="Пароли" 
                                     Placement="Custom"
                                     PlacementTarget="{Binding ElementName=BtnClose}"
                                     CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                     Style="{StaticResource ToolTip.App.Placement.Right}"/>
                        </Button.ToolTip>
                        <StackPanel>
                            <Viewbox>
                                <Control Template="{StaticResource PasswordKey}" Foreground="White"/>
                            </Viewbox>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding OpenPageCommand}"
                            CommandParameter="{x:Static enums:PagesName.Secret}"
                            Style="{StaticResource Button.MainWindow.SideMenu}"
                            DockPanel.Dock="Top">
                        <Button.ToolTip>
                            <ToolTip Content="Секреты" 
                                     Placement="Custom"
                                     PlacementTarget="{Binding ElementName=BtnClose}"
                                     CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                     Style="{StaticResource ToolTip.App.Placement.Right}"/>
                        </Button.ToolTip>
                        <StackPanel>
                            <Viewbox>
                                <Control Template="{StaticResource Lock}" Foreground="White"/>
                            </Viewbox>
                        </StackPanel>
                    </Button>

                    <Button Command="{Binding OpenPageCommand}"
                            CommandParameter="{x:Static enums:PagesName.Setting}"
                            Style="{StaticResource Button.MainWindow.SideMenu}"
                            VerticalAlignment="Bottom">
                        <Button.ToolTip>
                            <ToolTip Content="Настройки" 
                                     Placement="Custom"
                                     PlacementTarget="{Binding ElementName=BtnClose}"
                                     CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                     Style="{StaticResource ToolTip.App.Placement.Right}"/>
                        </Button.ToolTip>
                        <StackPanel>
                            <Viewbox>
                                <Control Template="{StaticResource Setting}" Foreground="White"/>
                            </Viewbox>
                        </StackPanel>
                    </Button>

                </DockPanel>

                <!--#endregion-->
                
                <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" Visibility="Visible" Grid.Column="1"/>

            </Grid>

            <!--#endregion-->

        </Grid>
    </Border>
</Window>
