<Window x:Class="EnigmaVault.Desktop.Views.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EnigmaVault.Desktop.Views.Windows" 
        xmlns:enums="clr-namespace:EnigmaVault.Desktop.Enums" 
        xmlns:windows="clr-namespace:EnigmaVault.Desktop.ViewModels.Windows" 
        d:DataContext="{d:DesignInstance Type=windows:MainWindowViewModel}"
        mc:Ignorable="d"
        WindowStyle="ThreeDBorderWindow"
        WindowStartupLocation="CenterScreen"
        Height="480" Width="800"
        MinHeight="700" MinWidth="1100"
        Title="MainWindow">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32"
                      GlassFrameThickness="0"
                      CornerRadius="0"/>
    </WindowChrome.WindowChrome>

    <Border x:Name="MainWindowBorder" Background="{StaticResource App.Background}" BorderBrush="LightCoral" BorderThickness="0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height ="32"/>
                <RowDefinition Height ="*"/>
            </Grid.RowDefinitions>

            <!--#region Кнопки измение WindowStat -->

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="1">

                <Button Command="{Binding ToggoleRightSideMenuOnPagesCommand}"
                        Style="{StaticResource Button.Management.Window}"
                        HorizontalAlignment="Right"
                        WindowChrome.IsHitTestVisibleInChrome="True"
                        Margin="0,0,10,0">
                    <Button.ToolTip>
                        <ToolTip Content="Права боковая панель" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=BtnMinimize}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Grid Background="Transparent">
                            <Control Template="{StaticResource PanelRightOpen}" 
                                     Foreground="White" 
                                     Margin="5">
                                <Control.Style>
                                    <Style TargetType="Control">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsSidebarOpen}" Value="True">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Control.Style>
                            </Control>

                            <Control Template="{StaticResource PanelRightClose}" 
                                     Foreground="White" 
                                     Margin="5">
                                <Control.Style>
                                    <Style TargetType="Control">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsSidebarOpen}" Value="True">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Control.Style>
                            </Control>
                        </Grid>
                    </Button.Content>
                </Button>

                <Button x:Name="BtnMinimize"
                        Command="{Binding MinimizeWindowCommand}" 
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Свернуть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=BtnMinimize}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Minimize}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="RestoreButton" 
                        Visibility="Collapsed" 
                        Command="{Binding RestoreWindowCommand}" 
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Во весь экран" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=RestoreButton}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Restore}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="MaximizeButton" 
                        Visibility="Visible"  
                        Command="{Binding MaximizeWindowCommand}"
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Развернуть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=MaximizeButton}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Maximize}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

                <Button x:Name="BtnClose" Command="{Binding ShutDownAppCommand}"
                        CommandParameter="{x:Static enums:WindowsName.MainWindow}"
                        Style="{StaticResource Button.Management.Window}"
                        WindowChrome.IsHitTestVisibleInChrome="True">
                    <Button.ToolTip>
                        <ToolTip Content="Закрыть" 
                                 Placement="Custom"
                                 PlacementTarget="{Binding ElementName=BtnClose}"
                                 CustomPopupPlacementCallback="{Binding BottomToolTipController.CustomPlacementCallback}"
                                 Style="{StaticResource ToolTip.App.Placement.Bottom}"/>
                    </Button.ToolTip>
                    <Button.Content>
                        <Control Template="{StaticResource Close}" Foreground="White" Margin="5"/>
                    </Button.Content>
                </Button>

            </StackPanel>

            <!--#endregion-->

            <!--#region Content -->

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="45"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!--#region Боковое меню -->

                <Border Background="{StaticResource App.SurfaceBrush}" 
                        BorderBrush="#30363D"
                        BorderThickness="0,0,1.5,0">
                    <DockPanel>
                        <Button Command="{Binding OpenPageCommand}"
                                CommandParameter="{x:Static enums:PagesName.Password}"
                                Style="{StaticResource Button.MainWindow.SideMenu}"
                                DockPanel.Dock="Top">
                            <Button.ToolTip>
                                <ToolTip Content="Пароли" 
                                         Placement="Custom"
                                         PlacementTarget="{Binding ElementName=BtnClose}"
                                         CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                         Style="{StaticResource ToolTip.App.Placement.Right}"/>
                            </Button.ToolTip>
                            <StackPanel>
                                <Viewbox>
                                    <Control Template="{StaticResource PasswordKey}" Foreground="White"/>
                                </Viewbox>
                            </StackPanel>
                        </Button>

                        <Button Command="{Binding OpenPageCommand}"
                                CommandParameter="{x:Static enums:PagesName.Secret}"
                                Style="{StaticResource Button.MainWindow.SideMenu}"
                                DockPanel.Dock="Top">
                            <Button.ToolTip>
                                <ToolTip Content="Секреты" 
                                         Placement="Custom"
                                         PlacementTarget="{Binding ElementName=BtnClose}"
                                         CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                         Style="{StaticResource ToolTip.App.Placement.Right}"/>
                            </Button.ToolTip>
                            <StackPanel>
                                <Viewbox>
                                    <Control Template="{StaticResource Lock}" Foreground="White"/>
                                </Viewbox>
                            </StackPanel>
                        </Button>
                        
                        <Button Command="{Binding OpenPageCommand}"
                                CommandParameter="{x:Static enums:PagesName.Note}"
                                Style="{StaticResource Button.MainWindow.SideMenu}"
                                DockPanel.Dock="Top">
                            <Button.ToolTip>
                                <ToolTip Content="Заметки" 
                                         Placement="Custom"
                                         PlacementTarget="{Binding ElementName=BtnClose}"
                                         CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                         Style="{StaticResource ToolTip.App.Placement.Right}"/>
                            </Button.ToolTip>
                            <StackPanel>
                                <Viewbox>
                                    <Control Template="{StaticResource Notebook}" Foreground="White"/>
                                </Viewbox>
                            </StackPanel>
                        </Button>

                        <Button Command="{Binding OpenPageCommand}"
                                CommandParameter="{x:Static enums:PagesName.Setting}"
                                Style="{StaticResource Button.App}"
                                VerticalAlignment="Bottom">
                            <Button.ToolTip>
                                <ToolTip Content="Настройки" 
                                         Placement="Custom"
                                         PlacementTarget="{Binding ElementName=BtnClose}"
                                         CustomPopupPlacementCallback="{Binding RightToolTipController.CustomPlacementCallback}"
                                         Style="{StaticResource ToolTip.App.Placement.Right}"/>
                            </Button.ToolTip>
                            <StackPanel>
                                <Viewbox>
                                    <Control Template="{StaticResource Setting}" Foreground="White"/>
                                </Viewbox>
                            </StackPanel>
                        </Button>

                    </DockPanel>
                </Border>
                
                <!--#endregion-->
                
                <Frame x:Name="MainFrame" NavigationUIVisibility="Hidden" Visibility="Visible" Grid.Column="1"/>

            </Grid>

            <!--#endregion-->

        </Grid>
    </Border>
</Window>
